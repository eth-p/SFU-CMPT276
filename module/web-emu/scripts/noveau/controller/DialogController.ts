//! --------------------------------------------------------------------------------------------------------------------
//! Copyright (C) 2019 Team Chipotle
//! MIT License
//! --------------------------------------------------------------------------------------------------------------------
import App from '../App';

// ---------------------------------------------------------------------------------------------------------------------

/**
 * The class that handles showing and hiding the dialog overlay.
 */
class DialogController extends App {
	// -------------------------------------------------------------------------------------------------------------
	// | Fields:                                                                                                   |
	// -------------------------------------------------------------------------------------------------------------

	protected overlay!: HTMLElement;

	// -------------------------------------------------------------------------------------------------------------
	// | Constructors:                                                                                             |
	// -------------------------------------------------------------------------------------------------------------

	public constructor() {
		super();
	}

	// -------------------------------------------------------------------------------------------------------------
	// | Hooks:                                                                                                    |
	// -------------------------------------------------------------------------------------------------------------

	protected initDOM(this: App.Fragment<this>): void {
		this.overlay = <HTMLElement>document.getElementById('dialogs');
	}

	protected initState(this: App.Fragment<this>): void {
		this.state.dialog.visible.addListener('change', visible => {
			this.overlay.classList[visible ? 'add' : 'remove']('visible');
			document.body.classList[visible ? 'add' : 'remove']('no-scroll');
		});
	}
}

// ---------------------------------------------------------------------------------------------------------------------
export default DialogController;
export {DialogController};
